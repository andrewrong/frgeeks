title: 重新学习正则表达式
date: 2014-07-09 21:52:12
categories:
tags: 正则
---

对于正则我只能说，我实在是不管看过多少遍，都掌握的不是很好...多半是我用的太少才会导致对它的掌控不是很好...这次的策略是先掌握好基本知识，然后在工作、vim中使用，我想只要把这些东西用起来的话，掌握一些基本用法还是可以的。

这次主要是对一篇关于正则文章的总结，文章名字为[55分钟学会正则表达式(译)](http://doslin.com/learn-regular-expressions-in-about-55-minutes/),这篇文章把正则表达式将的和写程序很像，对于程序员的我之前对正则的疑惑在这篇文章中都有所了解，总结一篇文章，主要是记录一些知识点，以便下一次遇到正则困难的时候再翻出来看看。有人评价这文章不够完整，我觉得其实已经很完整了，很多其他的语法在你读了这篇文章以后就会很快的学会...

### 1.正则定义

> 正则表达式其实是一门语言，一门语法小和简单的，领域特定的编程语言。它有以下的特点会让你觉得它真的是一门语言: 
>
 1. 每个正则表达式都能分解成一串指令。“找到这个，再找到那个，然后找到其中一个...”---就像语言一样，指令是顺序开始执行的;
>
 2. 一个正则表达式也有input(正则表达式)和output(能匹配上的文本)
 3. 存在着语法错误，不是每一个正则表达式都是正确的，就像不是每一个用C语言写的程序都可以跑的一样;
 4. 正则表达式可以编译，编译以后跑的更加快；---正则表达式可以像脚本一样，解释的跑着，也可以像静态语言一样编译以后再运行;
 
以上那么多的特点，可以让我觉得其实对正则表达式，应该以一种学习一门新语言一样去对待，尤其是你写的正则应该在匹配的过程中是如何进行匹配的，你的正则被分解为什么样的指令在进行...[浅析正则表达式—（原理篇）](http://blog.jobbole.com/71228/)这篇文章对正则的原理进行了解释，我觉得如果有兴趣还是可以了解一下的。

### 2. 基本的数据类型

对于正则表达式来说，所谓的数据类型，就是构成正则表达式的东西，粗略来分的话可以分为只代表自身的Literals和具有特殊含义的元字符.

具体可以分成:

1. Literals(字面值):比如a、b、c之类的，可以认为除去元字符之外所有字符
2. dot(`.`):可以用来匹配除换行符以外的任意字符的dot元字符,单个匹配...
3. 字符类(Character classes):字符类是字符在方括号中的集合。表示“找到集合里任意一个字符”.例如`[abcd]`:表示abcd四个字符中的其中一个;
4. 字符区间(ranges):主要是为了简化字符类的编写,比如`[a-zA-Z0-9]`这种形式
5. 位置:位置是一个很特殊的元素，它是零宽度的;

字符类可以类比与数组，当然这里的字符类与数组还是有很大的区别的，它表示其中的一个。。但是它存了很多的数据，数组不也是一样吗。而且字符类区间，我就是在脚本语言中，不是也有那种为了简化连续数字而简化的语法比如python中有`arr = range(0,10)`:这样用来获得一个数组;

**注:对于字符类内部的规则与外部是有区别的，很多元字符在内部都会被变成没有意义的Literals，但是有的元字符不但具有意义而且还与外面的意义是不一样的**
### 3. 基本的运算符

和语言一样，正则表达式也有它自己的运算符。

1. 字符类的否定:`[^abc]`:除了abc三个字符中其他所有字符
2. 乘法操作符:a{1,4}:用来匹配(1-4)个连续的a的字符串。这个操作符主要是为了简化正则表达式的写法;`{n1,n2}`：就类似于乘法一样，可以让它之前的字符变成n1倍数;
3. 一些看似比较特殊的符号，但是它们其实乘法的变种

	```
	? = {0,1}
	* = {0,}
	+ = {1,}
	```
**注意:关于乘法操作符，它是一种贪婪的运算符，它的目标是尽可能的多的匹配，比如你设定了{3,5}这样的区间，但是它会尽可能的向5去匹配，而不是在匹配到三个的时候就停止**

而解决贪婪性质的方法是在后面加上一个问号，比如`\d{4,5}? or .*? or .+?`之类的，它们会尽可能少的去匹配;

### 4. 关于正则表达式的流程控制

1. 分支，不知道怎么理解分支，所谓分支就是有多余两种以及两种以上的流向，对应到正则表达式就是`(abd|bcd|ddd)`

### 5. 单词边界

这个是一个比较难懂的概念，正则表达式中，除了可以匹配literals以外，其实还可以匹配位置，而位置与literals不同的是，它的宽度是0，也就是它不占字符串的长度，而仅仅只是位置。

比如单词边界，它的位置的具体含义是**一个单词字符与一个非单词字符之间的位置**，举例的话

```
(1)it(2)'(4)s(5)(6)cat(7)
```
这个有多少个单词边界，一共有7个单词边界，为什么5、6有两个呢，因为单词边界的界定是单词字符与非单词之间的位置，那么s与空白字符有一个位置，空白字符与c之间有一个字符,所以有两个;

作者提出的`a\ba`：这个是永远不能匹配的就是上面这个原因;


### 6. 分组`()`

分组是正则表达式的输出;组号是根据左括号，从左往右计算;

```
(\w+) had a ((\w+) \w+)
```

如果输入"I had a nice day",那么组1: I ,组2：nice day，组3: nice

#### 分组中的向后引用

`([abc])\1`:可以匹配aa or bb or cc

### 7. 偏移量

> 在文本编辑器中，会在你光标所在处开始搜索。这个编辑器会向前开始搜索文字，然后停在第一个匹配的地方。下一次搜索会在第一次完成搜索的地方的右侧开始。

### 8. 总结

```
字面值：a b c d 1 2 3 4等等。
字符类：. [abc] [a-z] \d \w \s
.表示“任何字符”
\d表示“一个数字”
\w表示“一个单词字符”，[0-9A-Za-z_]
\s表示“一个空格，tab，回车或一个换行符”
否定字符类：[^abc] \D \W \S
乘法器：{4} {3,16} {1,} ? * +
?表示“没有或一个”
*表示“没有或多个”
+表示“一个或多个”
乘法器是贪婪的除非你在之后使用?
分支和组合：(Septem|Octo|Novem|Decem)ber
词、行和文本边界：\b ^ $ \A \z
反向捕获组：\1 \2 \3等等。（在替换表达式和匹配表达式中同时生效）
元字符列表：. \ [ ] { } ? * + | ( ) ^ $
字符类中使用到元字符列表：[ ] \ - ^
你总是可以使用反斜杆对元字符进行转义：\

```

### 注:此文转载于[55分钟学会正则表达式(译)](http://doslin.com/learn-regular-expressions-in-about-55-minutes/)，个人只是觉得有帮助做一些总结而已，原文讲的很棒。





